Настройка PostgreSQL

    Установите PostgreSQL:
        Скачайте и установите PostgreSQL (https://www.postgresql.org/download/).
        Настройте сервер (по умолчанию: localhost:5432).
    Создайте базу данных:
        Подключитесь к PostgreSQL через терминал или pgAdmin:
        bash

psql -U postgres
Создайте базу данных:
sql

        CREATE DATABASE cake_orders;
        Убедитесь, что пользователь и пароль в DATABASE_URL соответствуют вашим настройкам (по умолчанию пользователь postgres).
    Обновите конфигурацию:
        В DATABASE_URL замените your_username и your_password на ваши данные.

Клиентская часть (без изменений)

Клиентская часть остаётся той же, что была в предыдущем примере — она уже отправляет данные на /order. Убедитесь, что сервер работает на http://localhost:8000.
Как это работает:

    Инициализация:
        При запуске FastAPI (@app.on_event("startup")) создаётся пул соединений с PostgreSQL через asyncpg.
        Если таблицы orders нет, она создаётся автоматически.
    Создание заказа:
        Эндпоинт /order принимает данные от формы (в формате JSON).
        Данные сохраняются в таблицу orders с полями: id, name, phone, product, quantity, details, total_cost, created_at.
        Возвращается подтверждение клиенту.
    Завершение:
        При остановке приложения (@app.on_event("shutdown")) пул соединений закрывается.

Проверка базы данных

После отправки заказа вы можете проверить данные в PostgreSQL:
bash
psql -U your_username -d cake_orders
sql
SELECT * FROM orders;
Запуск проекта

    Запустите сервер:
    bash

    python main.py
    Убедитесь, что PostgreSQL работает.
    Откройте HTML-файл:
        Используйте локальный сервер (например, Live Server в VS Code) для index.html.
        Отправьте заказ через форму — данные попадут в базу.

Дополнительно

    Логи: Сейчас ошибки выводятся в консоль. Можно добавить логирование через logging.
    Валидация телефона: Можно добавить проверку формата телефона на стороне сервера.
    Email: Для уведомлений можно интегрировать smtplib.